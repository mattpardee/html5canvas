if(typeof CE2=="undefined"){CE2={}}CE2.ignoredElements=[];CE2.clickCaptors=[];CE2.ignore=function(a){CE2.ignoredElements.push(a);if(CE2.tracker){CE2.tracker.ignoredElements.push(a)}};CE2.capture=function(a){CE2.clickCaptors.push(a);if(CE2.tracker){CE2.tracker.clickCaptors.push(a)}};CE2.findMatchingSnapshot=function(){var a,b=[];CE2.each(CE2.snapshots,function(c,d){c.id=d;b.push(c)});b.sort(function(d,c){var e,f;if(!(d.u&&c.u)){return 0}e=d.u.path?(d.u.path.length||1):(d.u.length||1);f=c.u.path?(c.u.path.length||1):(c.u.length||1);return f-e});CE2.each(b,function(c){if(CE2.matchURL(c,window.location.href)){a=c;return false}});return a};CE2.startTracking=function(b){CE2.testID=b.id;CE2.testVersion=b.v||1;var a=document.createElement("script");var c=window.location.protocol=="https:"?CE2.TRACKING_SCRIPT_SECURE:CE2.TRACKING_SCRIPT;if(CE2.ie){c=c.replace("t.js","tu.js")}a.src=c+"?s="+b.id+"&t="+(new Date().getTime());a.type="text/javascript";document.body.appendChild(a)};CE2.unescape=function(a){try{return decodeURIComponent(a)}catch(b){return unescape(a)}};CE2.qs2obj=function(a){if(a==null||/^\s*$/.test(a)){return null}var f={},d=null,e=a.replace(/\+/g," ").split("&");for(var c=0,b=e.length;c<b;c++){d=e[c].split("=");f[CE2.unescape(d[0])]=d[1]?CE2.unescape(d[1]):null}return f};CE2.browser=(function(){var b=navigator.userAgent;CE2.opera=CE2.ie=CE2.chrome=CE2.safari=CE2.firefox=false;var a="unknown";if(window.opera){a="opera";CE2.opera=true;CE2.operaVersion=parseInt(opera.version(),10)}else{if(/\bMSIE\b/.test(b)){a="ie";CE2.ie=true;CE2.ieVersion=parseInt(/MSIE (\d+)\.\d+/.exec(navigator.userAgent)[1],10);CE2.ieQuirksMode=(document.compatMode=="BackCompat")}else{if(/\b(iPhone|iP[ao]d)\b/.test(b)){a="iphone";CE2.iphone=true;CE2.webkit=true}else{if(/\bChrome\b/.test(b)){a="chrome";CE2.chrome=true;CE2.webkit=true}else{if(/AppleWebKit/.test(navigator.appVersion)){a="safari";CE2.safari=true;CE2.webkit=true}else{if(/Mozilla/i.test(b)&&!/compatible|webkit/i.test(b)){a="firefox";CE2.firefox=true}}}}}}if(CE2.webkit){CE2.webkitVersion=parseInt(/AppleWebKit\/(\d+)/.exec(b)[1],10)}return a})();CE2.each=function(g,e,b){if(!g){return}var f;if(typeof g.length=="number"&&typeof g.concat=="function"){for(var d=0,a=g.length;d<a;d++){f=g[d];if(e.call(b,f,d)===false){break}}}else{var c;for(c in g){f=g[c];if(f!==Object.prototype[c]){if(e.call(b,f,c)===false){break}}}}};CE2.getDomain=function(a){var b;if(b=/[a-z0-9-]+\.[a-z]{2,3}\.[a-z]{2}$/i.exec(a)){return b[0]}else{if(b=/[a-z0-9-]+\.[a-z]{2,}$/i.exec(a)){return b[0]}else{return a}}};CE2.addListener=function(c,a,b){if(c.addEventListener){c.addEventListener(a,b,true)}else{c.attachEvent("on"+a,b)}};CE2.listen=CE2.addListener;CE2.removeListener=function(c,a,b){if(c.removeEventListener){c.removeEventListener(a,b,true)}else{c.detachEvent("on"+a,b)}};CE2.userData={};CE2.set=function(a,b){a=parseInt(a,10);if(1<=a&&a<=5){CE2.userData[a]=String(b)}};CE2.findByClass=function(e){var a=[],c,b,d,g;if(document.body.getElementsByClassName){g=document.body.getElementsByClassName(e)}else{if(document.body.querySelectorAll){g=document.body.querySelectorAll("."+e)}}if(g){for(c=0,b=g.length;c<b;c++){a.push(g[c])}}else{g=document.body.getElementsByTagName("*");var f=new RegExp("(^|\\s)"+e+"($|\\s)");for(c=0,b=g.length;c<b;c++){d=g.item(c);if(d.className&&f.test(d.className)){a.push(d)}}}return a};CE2.HashMonitor=function(){var c=document.location.hash.substr(1);var b="__ce_hash_monitor__";document.body.insertBefore((function(){var f=document.createElement("frame");f.src="javascript:void(0)";f.style.display="none";f.style.position="absolute";f.style.left="0px";f.style.top="0px";f.id=b;return f})(),document.body.firstChild);var e=function(){return document.getElementById(b)};var a=function(){return e().contentWindow.document};var d=function(f){var g=a();g.open();g.close();g.location.hash=f};this.updateLocation=function(){var g=window.location.hash.substr(1);var f=a().location.hash.substr(1);if(g!=f){if(g==c){window.location.hash=f;c=f}else{d(g);c=g}}};d(c)};if(typeof CE2=="undefined"){CE2={}}CE2.READY_STATE_PATTERN=/complete|loaded/;CE2.autoStart=(typeof CE_MANUAL_START=="undefined"||!CE_MANUAL_START);CE2.domReady=(document.readyState&&CE2.READY_STATE_PATTERN.test(document.readyState));CE2.domReadyListeners=[];CE2.onDOMReady=function(a){if(CE2.domReady){return setTimeout(a,1)}CE2.domReadyListeners.push(a)};CE2.domReadySetup=function(){var b=function(d){var e,c;var f=CE2.domReadyListeners;while(f.length>0){f.pop().call()}CE2.domReady=true};if(CE2.domReady){b()}CE2.listen(window,"load",b);if(document.addEventListener){CE2.listen(document,"DOMContentLoaded",b)}if(document.readyState){var a=CE2.READY_STATE_PATTERN;(function(){if(a.test(document.readyState)){b()}else{setTimeout(arguments.callee,10)}})()}};if(CE2.autoStart){CE2.domReadySetup()}if(typeof CE2=="undefined"){CE2={}}CE2.matchURL=function(s,h){if(!(s&&h)){return false}var b=new CE2.URI(h.toLowerCase());s.o=s.o||"";if(/[re]/.test(s.o)){return new RegExp(s.u,"i").test(h)}if(/h/.test(s.o)&&((s.u.protocol)!=b.protocol)){return false}var v=b.domain,o=b.host,f=s.u.domain,a=s.u.host;if(/w/.test(s.o)&&o!=a){return false}if(v!=f||o.replace(/^www\./,"")!=a.replace(/^www\./,"")){return false}var d;if(!s.u.path){d="/"}else{d=s.u.path}var p=b.path;if(d!=p){if(/\//.test(s.o)){return false}var c=d.split("/");var t=p.split("/");var m=/(home|default|index)($|\..*)/i;for(var r=0,q=Math.max(c.length,t.length);r<q;r++){if(!c[r]){c[r]=""}if(!t[r]){t[r]=""}if(r==q-1){c[r]=c[r].replace(m,"");t[r]=t[r].replace(m,"")}if(c[r]!=t[r]){return false}}}var g=b.qs;var u=/\?/.test(s.o);var j=s.u.qs||"";if((u&&g&&!j)||(!g&&j)){return false}var k=false;CE2.each(j,function(l,i){if(g[i]!==l){k=true;return false}});if(k){return false}if(u){CE2.each(g,function(l,i){if(l!=j[i]){return(k=true)}});if(k){return false}}var n=s.u.hash||"";var e=b.hash||"";var u=/#/.test(s.o);if((u||n)&&n!=e){return false}return true};if(typeof CE2=="undefined"){CE2={}}if(typeof(CE2.URI)=="undefined"){CE2.URI=function(b){this.src=b;this.protocol=this.host=this.port=this.path=this.qs=this.hash=null;if(b){var a=typeof(b);if(a=="string"){this.initWithString(b)}else{if(a=="object"){this.initWithURI(b)}}}};CE2.URI.pattern=/^\s*([\S]+?:\/\/)?([^\s\/]+?@)?([a-z0-9\.-]+)?(\:\d+)?(\/?[^#\?\s]*)?([\?][^#\s]*)?([#]\S+)?/i;CE2.URI.prototype={initWithString:function(h){var g,b,f,a,e,d;var c=CE2.URI.pattern.exec(h);if(!c[1]&&h.charAt(0)!="/"){this.path=CE2.unescape((c[3]||"")+(c[5]||""))}else{if(g=c[1]){this.protocol=g.substr(0,g.indexOf(":"))}if(this.host=c[3]||null){this.domain=CE2.getDomain(this.host)}if(b=c[4]){this.port=Number(b.substr(1))}if(f=c[5]){this.path=CE2.unescape(f)}else{if(this.host){this.path="/"}}}if(a=c[6]){this.qs=CE2.qs2obj(a.substr(1))}if(e=c[7]){this.hash=CE2.unescape(e.substr(1))}},initWithURI:function(a){CE2.each(a,function(c,b){this[b]=c},this)},isAbsolute:function(){return this.isURL()||(this.path&&this.path.charAt(0)=="/")},isURL:function(){return this.protocol&&this.host},join:function(a){var c=new CE2.URI(this);var b=this.path;if(typeof(a)=="string"){a=new CE2.URI(a)}if(a.isURL()){return new CE2.URI(a)}if(a.isAbsolute()){b=a.path}else{if(b){b=b.split("/");b.pop();b=a.path?b.concat(a.path.split("/")):b;b=b.join("/")}else{if(this.isURL()){b="/"+a.path}else{b=a.path}}}c.path=b;c.qs=a.qs;c.hash=a.hash;return c},normalize:function(){if(!this.path){return}var c;if(CE2.ie&&CE2.ieVersion<9){c=[];if(this.path.charAt(0)=="/"){c.push("")}c=c.concat(this.path.split(/\/+/g));if(this.path.charAt(this.path.length-1)=="/"){c.push("")}}else{c=this.path.split(/\/+/g)}var b=0,a;do{a=c.length-1;if(c[b+1]==".."){if(c[b]==""&&b==0){c.splice(b+1,1)}else{c.splice(b,2);b-=1}}else{if(c[b]=="."){if(a==0){break}else{c.splice(b,1)}}else{b++}}}while(b<=a);this.path=c.join("/")},simplify:function(c){var b;var d=[];if(CE2.ie){b=c?c.join(this):this}else{c=c||new CE2.URI(document.baseURI);b=c.join(this)}b.normalize();if(b.host){d.push(b.host.replace(/^www\./i,""))}if(b.port!=null){d.push(":"+b.port)}if(/^\/(default|home|index|$)/i.test(b.path)){if(b.qs||b.hash){d.push("/")}}else{d.push(b.path)}if(b.qs){var a=[];CE2.each(b.qs,function(f,e){if(!/(^sess|^sid$|^phpsessid$|^jsessionid$|^__VIEWSTATE$)/i.test(e)){a.push(encodeURIComponent(e)+"="+encodeURIComponent(f))}});if(a.length){d.push("?"+a.join("&"))}}if(b.hash){d.push("#"+b.hash)}return d.join("")}}}CE2.TRACKING_SCRIPT="http://trk.cetrk.com/t.js";CE2.TRACKING_SCRIPT_SECURE="https://s3.amazonaws.com/trk.cetrk.com/t.js";CE2.TRACKING_DEST="http://trk.cetrk.com/";CE2.TRACKING_DEST_SECURE="https://s3.amazonaws.com/trk.cetrk.com/";CE2.uid=116381;CE2.snapshots={"226716":{u:{path:"/toc/",host:"oreilly.com",protocol:"http",domain:"oreilly.com"},v:2}};CE2.userMain=function(){CE2.testID=CE2.testVersion=null;var b;var a=function(){try{if(b){b.updateLocation()}var c=CE2.findMatchingSnapshot();if(c){if(c.id!=CE2.testID){CE2.startTracking(c)}}else{CE2.testID=CE2.testVersion=null;if(CE2.tracker){CE2.tracker.cleanup();CE2.tracker=null}}}catch(d){}};a();if(CE2.autoStart){if((CE2.ie&&CE2.ieVersion<8)||CE2.ieQuirksMode){b=new CE2.HashMonitor()}CE2.monitorInterval=setInterval(a,1000)}};if(CE2.autoStart){CE2.onDOMReady(CE2.userMain)}if(typeof CE_READY=="function"){CE2.onDOMReady(CE_READY)}else{if(typeof CE_READY=="object"){CE2.onDOMReady(function(){CE2.each(CE_READY,function(a){if(typeof a=="function"){a()}})})}};